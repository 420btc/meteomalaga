{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useEffect,useState}from'react';import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import Animated from\"react-native-web/dist/exports/Animated\";import{useNavigation}from\"@react-navigation/native\";import{Feather}from'@expo/vector-icons';import{isBettingAllowed,getRemainingRainBets,getRemainingTemperatureBets,getRemainingWindBets}from\"../services/localSupabaseService\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";var ForecastBanner=function ForecastBanner(){var navigation=useNavigation();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),bettingAllowed=_useState2[0],setBettingAllowed=_useState2[1];var _useState3=useState(3),_useState4=_slicedToArray(_useState3,2),remainingRainBets=_useState4[0],setRemainingRainBets=_useState4[1];var _useState5=useState(2),_useState6=_slicedToArray(_useState5,2),remainingTempBets=_useState6[0],setRemainingTempBets=_useState6[1];var _useState7=useState(2),_useState8=_slicedToArray(_useState7,2),remainingWindBets=_useState8[0],setRemainingWindBets=_useState8[1];var _useState9=useState(new Animated.Value(0)),_useState10=_slicedToArray(_useState9,1),fadeAnim=_useState10[0];useEffect(function(){checkBettingStatus();Animated.timing(fadeAnim,{toValue:1,duration:1000,useNativeDriver:true}).start();var intervalId=setInterval(checkBettingStatus,60000);return function(){return clearInterval(intervalId);};},[]);var checkBettingStatus=function(){var _ref=_asyncToGenerator(function*(){try{var allowed=yield isBettingAllowed('rain');setBettingAllowed(allowed);var rainBets=yield getRemainingRainBets();var tempBets=yield getRemainingTemperatureBets();var windBets=yield getRemainingWindBets();setRemainingRainBets(rainBets);setRemainingTempBets(tempBets);setRemainingWindBets(windBets);}catch(error){console.error('Error checking betting status:',error);}});return function checkBettingStatus(){return _ref.apply(this,arguments);};}();var navigateToBetting=function navigateToBetting(){navigation.navigate('CombinedBet');};return _jsx(Animated.View,{style:[styles.container,{opacity:fadeAnim}],children:_jsxs(TouchableOpacity,{style:styles.banner,onPress:navigateToBetting,children:[_jsx(View,{style:styles.iconContainer,children:_jsx(Feather,{name:bettingAllowed?\"unlock\":\"lock\",size:24,color:\"#FFFFFF\"})}),_jsxs(View,{style:styles.contentContainer,children:[_jsx(Text,{style:styles.title,children:bettingAllowed?\"¡Apuestas de lluvia abiertas!\":\"Apuestas de lluvia cerradas\"}),_jsxs(View,{style:styles.betsInfoContainer,children:[_jsxs(View,{style:styles.betTypeInfo,children:[_jsx(Text,{style:styles.betTypeText,children:\"Lluvia: \"}),_jsxs(Text,{style:styles.betCountText,children:[remainingRainBets,\"/3\"]})]}),_jsxs(View,{style:styles.betTypeInfo,children:[_jsx(Text,{style:styles.betTypeText,children:\"Temperatura: \"}),_jsxs(Text,{style:styles.betCountText,children:[remainingTempBets,\"/2\"]})]}),_jsxs(View,{style:styles.betTypeInfo,children:[_jsx(Text,{style:styles.betTypeText,children:\"Viento: \"}),_jsxs(Text,{style:styles.betCountText,children:[remainingWindBets,\"/2\"]})]})]})]}),_jsx(View,{style:styles.arrowContainer,children:_jsx(Feather,{name:\"chevron-right\",size:24,color:\"#FFFFFF\"})})]})});};var styles=StyleSheet.create({container:{marginHorizontal:16,marginVertical:8},banner:{flexDirection:'row',backgroundColor:'rgba(0, 0, 0, 0.3)',borderRadius:12,padding:12,alignItems:'center',borderWidth:1,borderColor:'rgba(255, 255, 255, 0.2)'},iconContainer:{marginRight:12,backgroundColor:'rgba(0, 0, 0, 0.3)',borderRadius:20,width:40,height:40,justifyContent:'center',alignItems:'center'},contentContainer:{flex:1},title:{fontSize:16,fontWeight:'bold',color:'#FFFFFF',marginBottom:4},betsInfoContainer:{flexDirection:'row',flexWrap:'wrap'},betTypeInfo:{flexDirection:'row',marginRight:12,alignItems:'center'},betTypeText:{fontSize:14,color:'rgba(255, 255, 255, 0.8)'},betCountText:{fontSize:14,fontWeight:'bold',color:'#FFD700'},arrowContainer:{marginLeft:8}});export default ForecastBanner;","map":{"version":3,"names":["React","useEffect","useState","StyleSheet","Text","View","TouchableOpacity","Animated","useNavigation","Feather","isBettingAllowed","getRemainingRainBets","getRemainingTemperatureBets","getRemainingWindBets","jsx","_jsx","jsxs","_jsxs","ForecastBanner","navigation","_useState","_useState2","_slicedToArray","bettingAllowed","setBettingAllowed","_useState3","_useState4","remainingRainBets","setRemainingRainBets","_useState5","_useState6","remainingTempBets","setRemainingTempBets","_useState7","_useState8","remainingWindBets","setRemainingWindBets","_useState9","Value","_useState10","fadeAnim","checkBettingStatus","timing","toValue","duration","useNativeDriver","start","intervalId","setInterval","clearInterval","_ref","_asyncToGenerator","allowed","rainBets","tempBets","windBets","error","console","apply","arguments","navigateToBetting","navigate","style","styles","container","opacity","children","banner","onPress","iconContainer","name","size","color","contentContainer","title","betsInfoContainer","betTypeInfo","betTypeText","betCountText","arrowContainer","create","marginHorizontal","marginVertical","flexDirection","backgroundColor","borderRadius","padding","alignItems","borderWidth","borderColor","marginRight","width","height","justifyContent","flex","fontSize","fontWeight","marginBottom","flexWrap","marginLeft"],"sources":["/Users/atemjohnatem/Downloads/meteo-malaga/src/components/ForecastBanner.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { StyleSheet, Text, View, TouchableOpacity, Animated } from 'react-native';\nimport { useNavigation } from '@react-navigation/native';\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../types/navigation';\nimport { Feather } from '@expo/vector-icons';\nimport { isBettingAllowed, getRemainingRainBets, getRemainingTemperatureBets, getRemainingWindBets } from '../services/localSupabaseService';\n\ntype ForecastBannerNavigationProp = NativeStackNavigationProp<RootStackParamList>;\n\nconst ForecastBanner: React.FC = () => {\n  const navigation = useNavigation<ForecastBannerNavigationProp>();\n  const [bettingAllowed, setBettingAllowed] = useState(false);\n  const [remainingRainBets, setRemainingRainBets] = useState(3);\n  const [remainingTempBets, setRemainingTempBets] = useState(2);\n  const [remainingWindBets, setRemainingWindBets] = useState(2);\n  const [fadeAnim] = useState(new Animated.Value(0));\n  \n  useEffect(() => {\n    checkBettingStatus();\n    \n    // Start fade-in animation\n    Animated.timing(fadeAnim, {\n      toValue: 1,\n      duration: 1000,\n      useNativeDriver: true,\n    }).start();\n    \n    // Set up interval to check betting status every minute\n    const intervalId = setInterval(checkBettingStatus, 60000);\n    \n    return () => clearInterval(intervalId);\n  }, []);\n  \n  const checkBettingStatus = async () => {\n    try {\n      const allowed = await isBettingAllowed('rain');\n      setBettingAllowed(allowed);\n      \n      // Get remaining bets counts\n      const rainBets = await getRemainingRainBets();\n      const tempBets = await getRemainingTemperatureBets();\n      const windBets = await getRemainingWindBets();\n      \n      setRemainingRainBets(rainBets);\n      setRemainingTempBets(tempBets);\n      setRemainingWindBets(windBets);\n    } catch (error) {\n      console.error('Error checking betting status:', error);\n    }\n  };\n  \n  const navigateToBetting = () => {\n    navigation.navigate('CombinedBet');\n  };\n  \n  return (\n    <Animated.View style={[styles.container, { opacity: fadeAnim }]}>\n      <TouchableOpacity style={styles.banner} onPress={navigateToBetting}>\n        <View style={styles.iconContainer}>\n          <Feather name={bettingAllowed ? \"unlock\" : \"lock\"} size={24} color=\"#FFFFFF\" />\n        </View>\n        \n        <View style={styles.contentContainer}>\n          <Text style={styles.title}>\n            {bettingAllowed \n              ? \"¡Apuestas de lluvia abiertas!\" \n              : \"Apuestas de lluvia cerradas\"}\n          </Text>\n          \n          <View style={styles.betsInfoContainer}>\n            <View style={styles.betTypeInfo}>\n              <Text style={styles.betTypeText}>Lluvia: </Text>\n              <Text style={styles.betCountText}>{remainingRainBets}/3</Text>\n            </View>\n            \n            <View style={styles.betTypeInfo}>\n              <Text style={styles.betTypeText}>Temperatura: </Text>\n              <Text style={styles.betCountText}>{remainingTempBets}/2</Text>\n            </View>\n            \n            <View style={styles.betTypeInfo}>\n              <Text style={styles.betTypeText}>Viento: </Text>\n              <Text style={styles.betCountText}>{remainingWindBets}/2</Text>\n            </View>\n          </View>\n        </View>\n        \n        <View style={styles.arrowContainer}>\n          <Feather name=\"chevron-right\" size={24} color=\"#FFFFFF\" />\n        </View>\n      </TouchableOpacity>\n    </Animated.View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    marginHorizontal: 16,\n    marginVertical: 8,\n  },\n  banner: {\n    flexDirection: 'row',\n    backgroundColor: 'rgba(0, 0, 0, 0.3)',\n    borderRadius: 12,\n    padding: 12,\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: 'rgba(255, 255, 255, 0.2)',\n  },\n  iconContainer: {\n    marginRight: 12,\n    backgroundColor: 'rgba(0, 0, 0, 0.3)',\n    borderRadius: 20,\n    width: 40,\n    height: 40,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  contentContainer: {\n    flex: 1,\n  },\n  title: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    color: '#FFFFFF',\n    marginBottom: 4,\n  },\n  betsInfoContainer: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n  },\n  betTypeInfo: {\n    flexDirection: 'row',\n    marginRight: 12,\n    alignItems: 'center',\n  },\n  betTypeText: {\n    fontSize: 14,\n    color: 'rgba(255, 255, 255, 0.8)',\n  },\n  betCountText: {\n    fontSize: 14,\n    fontWeight: 'bold',\n    color: '#FFD700',\n  },\n  arrowContainer: {\n    marginLeft: 8,\n  },\n});\n\nexport default ForecastBanner;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}