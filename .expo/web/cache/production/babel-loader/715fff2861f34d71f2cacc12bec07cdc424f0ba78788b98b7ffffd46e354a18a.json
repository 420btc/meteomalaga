{"ast":null,"code":"import React,{useEffect,useState}from'react';import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import Animated from\"react-native-web/dist/exports/Animated\";import{useNavigation}from\"@react-navigation/native\";import{Feather}from'@expo/vector-icons';import{isBettingAllowed,getRemainingRainBets,getRemainingTemperatureBets,getRemainingWindBets}from\"../services/localSupabaseService\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ForecastBanner=()=>{const navigation=useNavigation();const[bettingAllowed,setBettingAllowed]=useState(false);const[remainingRainBets,setRemainingRainBets]=useState(3);const[remainingTempBets,setRemainingTempBets]=useState(2);const[remainingWindBets,setRemainingWindBets]=useState(2);const[fadeAnim]=useState(new Animated.Value(0));useEffect(()=>{checkBettingStatus();Animated.timing(fadeAnim,{toValue:1,duration:1000,useNativeDriver:true}).start();const intervalId=setInterval(checkBettingStatus,60000);return()=>clearInterval(intervalId);},[]);const checkBettingStatus=async()=>{try{const allowed=await isBettingAllowed('rain');setBettingAllowed(allowed);const rainBets=await getRemainingRainBets();const tempBets=await getRemainingTemperatureBets();const windBets=await getRemainingWindBets();setRemainingRainBets(rainBets);setRemainingTempBets(tempBets);setRemainingWindBets(windBets);}catch(error){console.error('Error checking betting status:',error);}};const navigateToBetting=()=>{navigation.navigate('CombinedBet');};return _jsx(Animated.View,{style:[styles.container,{opacity:fadeAnim}],children:_jsxs(TouchableOpacity,{style:styles.banner,onPress:navigateToBetting,children:[_jsx(View,{style:styles.iconContainer,children:_jsx(Feather,{name:bettingAllowed?\"unlock\":\"lock\",size:24,color:\"#FFFFFF\"})}),_jsxs(View,{style:styles.contentContainer,children:[_jsx(Text,{style:styles.title,children:bettingAllowed?\"¡Apuestas de lluvia abiertas!\":\"Apuestas de lluvia cerradas\"}),_jsxs(View,{style:styles.betsInfoContainer,children:[_jsxs(View,{style:styles.betTypeInfo,children:[_jsx(Text,{style:styles.betTypeText,children:\"Lluvia: \"}),_jsxs(Text,{style:styles.betCountText,children:[remainingRainBets,\"/3\"]})]}),_jsxs(View,{style:styles.betTypeInfo,children:[_jsx(Text,{style:styles.betTypeText,children:\"Temperatura: \"}),_jsxs(Text,{style:styles.betCountText,children:[remainingTempBets,\"/2\"]})]}),_jsxs(View,{style:styles.betTypeInfo,children:[_jsx(Text,{style:styles.betTypeText,children:\"Viento: \"}),_jsxs(Text,{style:styles.betCountText,children:[remainingWindBets,\"/2\"]})]})]})]}),_jsx(View,{style:styles.arrowContainer,children:_jsx(Feather,{name:\"chevron-right\",size:24,color:\"#FFFFFF\"})})]})});};const styles=StyleSheet.create({container:{marginHorizontal:16,marginVertical:8},banner:{flexDirection:'row',backgroundColor:'rgba(0, 0, 0, 0.3)',borderRadius:12,padding:12,alignItems:'center',borderWidth:1,borderColor:'rgba(255, 255, 255, 0.2)'},iconContainer:{marginRight:12,backgroundColor:'rgba(0, 0, 0, 0.3)',borderRadius:20,width:40,height:40,justifyContent:'center',alignItems:'center'},contentContainer:{flex:1},title:{fontSize:16,fontWeight:'bold',color:'#FFFFFF',marginBottom:4},betsInfoContainer:{flexDirection:'row',flexWrap:'wrap'},betTypeInfo:{flexDirection:'row',marginRight:12,alignItems:'center'},betTypeText:{fontSize:14,color:'rgba(255, 255, 255, 0.8)'},betCountText:{fontSize:14,fontWeight:'bold',color:'#FFD700'},arrowContainer:{marginLeft:8}});export default ForecastBanner;","map":{"version":3,"names":["React","useEffect","useState","StyleSheet","Text","View","TouchableOpacity","Animated","useNavigation","Feather","isBettingAllowed","getRemainingRainBets","getRemainingTemperatureBets","getRemainingWindBets","jsx","_jsx","jsxs","_jsxs","ForecastBanner","navigation","bettingAllowed","setBettingAllowed","remainingRainBets","setRemainingRainBets","remainingTempBets","setRemainingTempBets","remainingWindBets","setRemainingWindBets","fadeAnim","Value","checkBettingStatus","timing","toValue","duration","useNativeDriver","start","intervalId","setInterval","clearInterval","allowed","rainBets","tempBets","windBets","error","console","navigateToBetting","navigate","style","styles","container","opacity","children","banner","onPress","iconContainer","name","size","color","contentContainer","title","betsInfoContainer","betTypeInfo","betTypeText","betCountText","arrowContainer","create","marginHorizontal","marginVertical","flexDirection","backgroundColor","borderRadius","padding","alignItems","borderWidth","borderColor","marginRight","width","height","justifyContent","flex","fontSize","fontWeight","marginBottom","flexWrap","marginLeft"],"sources":["/Users/atemjohnatem/Downloads/meteo-malaga/src/components/ForecastBanner.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { StyleSheet, Text, View, TouchableOpacity, Animated } from 'react-native';\nimport { useNavigation } from '@react-navigation/native';\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../types/navigation';\nimport { Feather } from '@expo/vector-icons';\nimport { isBettingAllowed, getRemainingRainBets, getRemainingTemperatureBets, getRemainingWindBets } from '../services/localSupabaseService';\n\ntype ForecastBannerNavigationProp = NativeStackNavigationProp<RootStackParamList>;\n\nconst ForecastBanner: React.FC = () => {\n  const navigation = useNavigation<ForecastBannerNavigationProp>();\n  const [bettingAllowed, setBettingAllowed] = useState(false);\n  const [remainingRainBets, setRemainingRainBets] = useState(3);\n  const [remainingTempBets, setRemainingTempBets] = useState(2);\n  const [remainingWindBets, setRemainingWindBets] = useState(2);\n  const [fadeAnim] = useState(new Animated.Value(0));\n  \n  useEffect(() => {\n    checkBettingStatus();\n    \n    // Start fade-in animation\n    Animated.timing(fadeAnim, {\n      toValue: 1,\n      duration: 1000,\n      useNativeDriver: true,\n    }).start();\n    \n    // Set up interval to check betting status every minute\n    const intervalId = setInterval(checkBettingStatus, 60000);\n    \n    return () => clearInterval(intervalId);\n  }, []);\n  \n  const checkBettingStatus = async () => {\n    try {\n      const allowed = await isBettingAllowed('rain');\n      setBettingAllowed(allowed);\n      \n      // Get remaining bets counts\n      const rainBets = await getRemainingRainBets();\n      const tempBets = await getRemainingTemperatureBets();\n      const windBets = await getRemainingWindBets();\n      \n      setRemainingRainBets(rainBets);\n      setRemainingTempBets(tempBets);\n      setRemainingWindBets(windBets);\n    } catch (error) {\n      console.error('Error checking betting status:', error);\n    }\n  };\n  \n  const navigateToBetting = () => {\n    navigation.navigate('CombinedBet');\n  };\n  \n  return (\n    <Animated.View style={[styles.container, { opacity: fadeAnim }]}>\n      <TouchableOpacity style={styles.banner} onPress={navigateToBetting}>\n        <View style={styles.iconContainer}>\n          <Feather name={bettingAllowed ? \"unlock\" : \"lock\"} size={24} color=\"#FFFFFF\" />\n        </View>\n        \n        <View style={styles.contentContainer}>\n          <Text style={styles.title}>\n            {bettingAllowed \n              ? \"¡Apuestas de lluvia abiertas!\" \n              : \"Apuestas de lluvia cerradas\"}\n          </Text>\n          \n          <View style={styles.betsInfoContainer}>\n            <View style={styles.betTypeInfo}>\n              <Text style={styles.betTypeText}>Lluvia: </Text>\n              <Text style={styles.betCountText}>{remainingRainBets}/3</Text>\n            </View>\n            \n            <View style={styles.betTypeInfo}>\n              <Text style={styles.betTypeText}>Temperatura: </Text>\n              <Text style={styles.betCountText}>{remainingTempBets}/2</Text>\n            </View>\n            \n            <View style={styles.betTypeInfo}>\n              <Text style={styles.betTypeText}>Viento: </Text>\n              <Text style={styles.betCountText}>{remainingWindBets}/2</Text>\n            </View>\n          </View>\n        </View>\n        \n        <View style={styles.arrowContainer}>\n          <Feather name=\"chevron-right\" size={24} color=\"#FFFFFF\" />\n        </View>\n      </TouchableOpacity>\n    </Animated.View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    marginHorizontal: 16,\n    marginVertical: 8,\n  },\n  banner: {\n    flexDirection: 'row',\n    backgroundColor: 'rgba(0, 0, 0, 0.3)',\n    borderRadius: 12,\n    padding: 12,\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: 'rgba(255, 255, 255, 0.2)',\n  },\n  iconContainer: {\n    marginRight: 12,\n    backgroundColor: 'rgba(0, 0, 0, 0.3)',\n    borderRadius: 20,\n    width: 40,\n    height: 40,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  contentContainer: {\n    flex: 1,\n  },\n  title: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    color: '#FFFFFF',\n    marginBottom: 4,\n  },\n  betsInfoContainer: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n  },\n  betTypeInfo: {\n    flexDirection: 'row',\n    marginRight: 12,\n    alignItems: 'center',\n  },\n  betTypeText: {\n    fontSize: 14,\n    color: 'rgba(255, 255, 255, 0.8)',\n  },\n  betCountText: {\n    fontSize: 14,\n    fontWeight: 'bold',\n    color: '#FFD700',\n  },\n  arrowContainer: {\n    marginLeft: 8,\n  },\n});\n\nexport default ForecastBanner;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}