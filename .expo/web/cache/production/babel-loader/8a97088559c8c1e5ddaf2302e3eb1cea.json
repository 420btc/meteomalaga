{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import{nanoid}from'nanoid/non-secure';import*as React from'react';import useLatestCallback from'use-latest-callback';import useNavigation from\"./useNavigation\";import usePreventRemoveContext from\"./usePreventRemoveContext\";import useRoute from\"./useRoute\";export default function usePreventRemove(preventRemove,callback){var _React$useState=React.useState(function(){return nanoid();}),_React$useState2=_slicedToArray(_React$useState,1),id=_React$useState2[0];var navigation=useNavigation();var _useRoute=useRoute(),routeKey=_useRoute.key;var _usePreventRemoveCont=usePreventRemoveContext(),setPreventRemove=_usePreventRemoveCont.setPreventRemove;React.useEffect(function(){setPreventRemove(id,routeKey,preventRemove);return function(){setPreventRemove(id,routeKey,false);};},[setPreventRemove,id,routeKey,preventRemove]);var beforeRemoveListener=useLatestCallback(function(e){if(!preventRemove){return;}e.preventDefault();callback({data:e.data});});React.useEffect(function(){return navigation===null||navigation===void 0?void 0:navigation.addListener('beforeRemove',beforeRemoveListener);},[navigation,beforeRemoveListener]);}","map":{"version":3,"names":["nanoid","React","useLatestCallback","useNavigation","usePreventRemoveContext","useRoute","usePreventRemove","preventRemove","callback","_React$useState","useState","_React$useState2","_slicedToArray","id","navigation","_useRoute","routeKey","key","_usePreventRemoveCont","setPreventRemove","useEffect","beforeRemoveListener","e","preventDefault","data","addListener"],"sources":["../../src/usePreventRemove.tsx"],"sourcesContent":[null],"mappings":"iEACA,OAASA,MAAM,KAAQ,mBAAmB,CAC1C,MAAO,GAAK,CAAAC,KAAK,KAAM,OAAO,CAC9B,MAAO,CAAAC,iBAAiB,KAAM,qBAAqB,CAGnD,MAAO,CAAAC,aAAa,uBACpB,MAAO,CAAAC,uBAAuB,iCAC9B,MAAO,CAAAC,QAAQ,kBAQf,cAAe,SAAS,CAAAC,gBAAgBA,CACtCC,aAAsB,CACtBC,QAAmE,CACnE,CACA,IAAAC,eAAA,CAAaR,KAAK,CAACS,QAAQ,CAAC,iBAAM,CAAAV,MAAM,EAAE,GAAC,CAAAW,gBAAA,CAAAC,cAAA,CAAAH,eAAA,IAApCI,EAAE,CAAAF,gBAAA,IAET,GAAM,CAAAG,UAAU,CAAGX,aAAa,EAAE,CAClC,IAAAY,SAAA,CAA0BV,QAAQ,EAAE,CAAvBW,QAAA,CAAAD,SAAA,CAALE,GAAG,CAEX,IAAAC,qBAAA,CAA6Bd,uBAAuB,EAAE,CAA9Ce,gBAAA,CAAAD,qBAAA,CAAAC,gBAAA,CAERlB,KAAK,CAACmB,SAAS,CAAC,UAAM,CACpBD,gBAAgB,CAACN,EAAE,CAAEG,QAAQ,CAAET,aAAa,CAAC,CAC7C,MAAO,WAAM,CACXY,gBAAgB,CAACN,EAAE,CAAEG,QAAQ,CAAE,KAAK,CAAC,CACvC,CAAC,CACH,CAAC,CAAE,CAACG,gBAAgB,CAAEN,EAAE,CAAEG,QAAQ,CAAET,aAAa,CAAC,CAAC,CAEnD,GAAM,CAAAc,oBAAoB,CAAGnB,iBAAiB,CAE3C,SAAAoB,CAAC,CAAK,CACP,GAAI,CAACf,aAAa,CAAE,CAClB,OACF,CAEAe,CAAC,CAACC,cAAc,EAAE,CAElBf,QAAQ,CAAC,CAAEgB,IAAI,CAAEF,CAAC,CAACE,IAAK,CAAC,CAAC,CAC5B,CAAC,CAAC,CAEFvB,KAAK,CAACmB,SAAS,CACb,iBAAM,CAAAN,UAAU,SAAVA,UAAU,iBAAVA,UAAU,CAAEW,WAAW,CAAC,cAAc,CAAEJ,oBAAoB,CAAC,GACnE,CAACP,UAAU,CAAEO,oBAAoB,CAAC,CACnC,CACH","ignoreList":[]},"metadata":{},"sourceType":"module"}